# Vulnerability Management con Greenbone (OpenVAS)

---

## 1 Obiettivo del Progetto

L'obiettivo di questo laboratorio è configurare ed eseguire un ciclo completo di Vulnerability Management utilizzando strumenti Open Source. A differenza di una semplice scansione con Nmap, GVM permette di identificare Vulnerabilità ed Esposizioni Comuni (CVE), gestirne la gravità (Severity) e generare report professionali per la remediation.

---

## 2 Setup e Troubleshooting (Problem Solving)

L'installazione di GVM su Kali Linux ha presentato sfide tecniche significative legate alla gestione del database.

### Il Problema: PostgreSQL Version Mismatch
Durante il setup iniziale (`gvm-setup`), l'installazione falliva con errori critici relativi al database:

> `ERROR: template database "template1" has a collation version mismatch`

> `ERROR: The Postgresql DB does not exist.`

Analisi: L'aggiornamento delle librerie di sistema di Kali Linux (glibc) ha creato un disallineamento con la versione del database PostgreSQL preesistente (creato con una versione precedente).

La Soluzione:

Invece di reinstallare il sistema operativo, ho proceduto alla riparazione manuale del database:

1. Accesso alla shell di PostgreSQL: `sudo -u postgres psql`.

2. Aggiornamento della collation version:

```sql
ALTER DATABASE postgres REFRESH COLLATION VERSION;
ALTER DATABASE template1 REFRESH COLLATION VERSION;
```

3. Creazione manuale del database GVM mancante:

```bash
sudo runuser -u postgres -- /usr/share/gvm/create-postgresql-database
```

4. Creazione manuale dell'utente amministratore.

Questa operazione ha permesso di avviare correttamente i servizi GVM.

---

## 3 Configurazione della Scansione

Una volta effettuato l'accesso alla dashboard web (`https://127.0.0.1:9392`), ho configurato l'ambiente di test.

1. Definizione del Target
Ho configurato la macchina Windows 10 come bersaglio della scansione.
- Host: `10.0.2.3`
- Port Range: All IANA TCP

![]()

2. Configurazione del Task
Ho creato un task di scansione utilizzando la configurazione "Full and fast". Questa modalità utilizza l'intera base di dati dei Network Vulnerability Tests (NVT) ottimizzando però i tempi di esecuzione ed evitando test invasivi che potrebbero causare Denial of Service (DoS) sul target.

---

## 4. Esecuzione e Risultati

La scansione è stata avviata e monitorata attraverso la dashboard "Tasks".

![]()

### Analisi del Report

Al termine della scansione, GVM ha rilevato diverse vulnerabilità, classificate secondo il punteggio CVSS (Common Vulnerability Scoring System).

Vulnerabilità Rilevate (Esempio):
- High / Medium: [to do...]
- Info: Rilevamento servizi, Traceroute, OS detection.

![]()

---

## 5. Conclusioni

Questo progetto ha dimostrato come implementare un sistema di Vulnerability Scanning persistente a costo zero. Rispetto a strumenti one-shot come Nmap, GVM offre:
1.  Storico: Possibilità di confrontare scansioni nel tempo (Trend analysis).
2.  Dettagli: Ogni vulnerabilità include riferimenti ai CVE e istruzioni per la mitigazione.
3.  Automazione: Capacità di schedulare scansioni periodiche.

La capacità di risolvere l'errore critico di PostgreSQL durante l'installazione ha inoltre rafforzato le competenze di amministrazione di sistema Linux e gestione database.